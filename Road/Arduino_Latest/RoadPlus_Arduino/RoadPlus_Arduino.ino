
//voor serial
char incomingByte = 0;
String message;
String metaMessage;
int speedLimit = 0;
String meta;
long timetillnext;
long previousTime;
boolean state;
boolean warning;
boolean sign;
boolean dist;
boolean temp;

String First;
String Second;
#include <Servo.h>

//Define instances of Servo:
Servo Servo1;
Servo Servo2;

//Define Pins:
const int trigPin1 = A0;
const int echoPin1 = A1;
const int trigPin2 = A4;
const int echoPin2 = A3;
const int servoPin1 = A2;
const int servoPin2 = A5;

//set constants:
const int timeOutPulseRead = 15000;
const int MaxDistance = 200.0;
const int MinDistance = 2.0;
const int offsetServo1 = 20;
const int offsetServo2 = 20;

//Define Variables:
int Positie = 55;
boolean Richting;

//voor temperatuur
#include <OneWire.h>
#include <DallasTemperature.h>
#define ONE_WIRE_BUS 11
OneWire ourWire(ONE_WIRE_BUS);
DallasTemperature sensors(&ourWire);

//voor led matrix
#include <Arduino.h>

//IO
#define LEDARRAY_D 2
#define LEDARRAY_C 3
#define LEDARRAY_B 4
#define LEDARRAY_A 5
#define LEDARRAY_G 6
#define LEDARRAY_DI 7
#define LEDARRAY_CLK 8
#define LEDARRAY_LAT 9


unsigned char Display_Buffer[2];

const unsigned char  signWarning[32] =
{
  0xfe, 0xfd, 0xfd, 0xfb, 0xfa, 0xf6, 0xf6, 0xee,
  0xee, 0xde, 0xde, 0xbf, 0xbe, 0x7e, 0x7f, 0x00,
  0x7f, 0xbf, 0xbf, 0xdf, 0x5f, 0x6f, 0x6f, 0x77,
  0x77, 0x7b, 0x7b, 0xfd, 0x7d, 0x7e, 0xfe, 0x00,
};

const unsigned char  OneDirection[32] =
{
  0xf8, 0xe0, 0xe0, 0x80, 0x80, 0x00, 0x00, 0x0f,
  0x0f, 0x00, 0x00, 0x80, 0x80, 0xc0, 0xe0, 0xf8,
  0x1f, 0x07, 0x03, 0x01, 0x01, 0x00, 0x00, 0xf0,
  0xf0, 0x00, 0x00, 0x01, 0x01, 0x03, 0x07, 0x1f,
};


unsigned char  sign0[16] =
{
  0xff, 0xff, 0x83, 0xbb, 0xbb, 0xbb, 0xbb, 0xbb,
  0xbb, 0xbb, 0xbb, 0xbb, 0xbb, 0x83, 0xff, 0xff,
};
unsigned char  sign1[16] =
{
  0xff, 0xff, 0xfb, 0xf3, 0xeb, 0xfb, 0xfb, 0xfb,
  0xfb, 0xfb, 0xfb, 0xfb, 0xfb, 0xfb, 0xff, 0xff,
};

const unsigned char  sign2[16] =
{
  0xff, 0xff, 0xc1, 0xfd, 0xfd, 0xfd, 0xfd, 0xc1,
  0xdf, 0xdf, 0xdf, 0xdf, 0xdf, 0xc1, 0xff, 0xff,
};

const unsigned char  sign3[16] =
{
  0xff, 0xFF, 0xc1, 0xfd, 0xfd, 0xfd, 0xfd, 0xf1,
  0xf1, 0xfd, 0xfd, 0xfd, 0xfd, 0xc1, 0xff, 0xff,
};

const unsigned char  sign4[16] =
{
  0xff, 0xff, 0xdd, 0xdd, 0xdd, 0xdd, 0xdd, 0xc1,
  0xfd, 0xfd, 0xfd, 0xfd, 0xfd, 0xfd, 0xff, 0xff,
};

const unsigned char  sign5[16] =
{
  0xff, 0xff, 0x83, 0xbf, 0xbf, 0xbf, 0xbf, 0x83,
  0xfb, 0xfb, 0xfb, 0xfb, 0xfb, 0x83, 0xff, 0xff,
};

const unsigned char  sign6[16] =
{
  0xff, 0xff, 0xc1, 0xdf, 0xdf, 0xdf, 0xdf, 0xc1,
  0xdd, 0xdd, 0xdd, 0xdd, 0xdd, 0xc1, 0xff, 0xff,
};

const unsigned char  sign7[16] =
{
  0xff, 0xff, 0xc1, 0xfd, 0xfd, 0xfb, 0xfb, 0xf7,
  0xf7, 0xf7, 0xef, 0xef, 0xdf, 0xdf, 0xff, 0xff,
};

const unsigned char  sign8[16] =
{
  0xff, 0xff, 0xc1, 0xdd, 0xdd, 0xdd, 0xdd, 0xc1,
  0xc1, 0xdd, 0xdd, 0xdd, 0xdd, 0xc1, 0xff, 0xff,
};

const unsigned char  sign9[16] =
{
  0xff, 0xff, 0xc1, 0xdd, 0xdd, 0xdd, 0xdd, 0xc1,
  0xfd, 0xfd, 0xfd, 0xfd, 0xfd, 0xc1, 0xff, 0xff,
};

void setup()
{
  pinMode(LEDARRAY_D, OUTPUT);
  pinMode(LEDARRAY_C, OUTPUT);
  pinMode(LEDARRAY_B, OUTPUT);
  pinMode(LEDARRAY_A, OUTPUT);
  pinMode(LEDARRAY_G, OUTPUT);
  pinMode(LEDARRAY_DI, OUTPUT);
  pinMode(LEDARRAY_CLK, OUTPUT);
  pinMode(LEDARRAY_LAT, OUTPUT);
  Serial.begin(19200);
  sensors.begin();
  Servo1.attach(servoPin1);
  Servo2.attach(servoPin2);

  //set pinmode for all pins:
  pinMode(trigPin1, OUTPUT);
  pinMode(echoPin1, INPUT);
  pinMode(trigPin2, OUTPUT);
  pinMode(echoPin2, INPUT);
}

void loop()
{
  GetMessage();
  if (sign || speedLimit != 0)
  {
    DisplaySpeedLimit();
  }
  if (temp)
  {
    SendTemperature();
    temp = false;
  }
  if (dist)
  {
    GetDistance();
  }
}





























